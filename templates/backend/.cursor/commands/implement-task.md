# /implement-task（backend）

目标：在后端仓库内以“最小闭环”完成一个任务，优先复用现有能力。

## 输入
- 任务描述（业务目标、边界、截止）
- 相关 `openapi.yaml` / `spec.md`（如有）
- 当前分支改动上下文

## 执行步骤
1. 先执行 `/api-search`，确认是否已有可复用接口/模块。
2. 若需新增能力，先明确契约变更，再改实现（controller/service/dao）。
3. 严格最小变更：只改任务必需文件，不顺手重构。
4. 补最小验证（单测/集成测/关键命令）。
5. 输出 PR 说明草稿（复用依据、契约影响、验证结果）。

## 输出格式（必须）
- 按 `PR_TEMPLATE.md` 输出 **2)~5)** 对应字段，标题保持一致：
  - **2) 变更范围（必填）**
    - `业务目标（1-2 句）`
    - `代码改动范围（controller/service/dao/dto/migration）`
    - `是否包含 DB 结构变更：是/否`
    - `是否包含跨服务调用改动：是/否`
  - **3) 契约影响（必填）**
    - `受影响 endpoint（逐条）`
    - `契约结论：有变更 / 无变更`
    - `是否更新 openapi.yaml：是/否`
    - `若“无变更”，请说明依据`
    - `向后兼容性评估`
  - **4) 验证证据（必填）**
    - `本地验证命令`
    - `关键结果摘要`
    - `最小回归用例（至少 2 条）`
  - **5) 风险与回滚（必填）**
    - `主要风险`
    - `监控与观察点`
    - `回滚方案`

## 复制规则（必须）
- `/api-search` 的结果用于填充 PR 的 **1) 复用依据（必填）**。
- 本命令输出用于填充 PR 的 **2)~5)**。
- 输出末尾附上 **6) 提交前自检（勾选）** 的勾选建议（仅勾选已满足项）。

## 禁止事项
- 未评估复用就直接新建接口。
- 变更 API 却不更新契约或不说明“接口不变”依据。
